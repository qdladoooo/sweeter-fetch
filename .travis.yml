language: php

php:
  - '5.4'
  - '5.5'
  - '5.6'
  - '7.0'
  - hhvm
  - nightly

services:
  - mysql

before_script:
  # Set up Composer
  - composer self-update || true
  - composer install --prefer-dist
  # Set up permissions
  - chmod -R 0777 src/
  #Set up Mysql
  - mysql -e "" -u root
  - mysql -e "CREATE USER 'sf_travis'@'localhost' IDENTIFIED BY 'sf_travis';" -u root
  - mysql -e "GRANT ALL PRIVILEGES ON sf_travis.* TO 'sf_travis'@'localhost';" -u root
  - mysql -e "FLUSH PRIVILEGES;" -u root

  notifications:
    email:
      recipients:
        - qdladoooo@gmail.com
        on_success: always

  script: phpunit -c phpunit.xml --coverage-text
